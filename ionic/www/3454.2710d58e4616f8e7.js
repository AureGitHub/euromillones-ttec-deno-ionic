"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3454],{3454:(J,_,r)=>{r.r(_),r.d(_,{ApuestaPagePageModule:()=>E});var u=r(6814),d=r(95),c=r(2511),o=r(4258),f=r(3044),p=r(5861),e=r(6689);function A(n,l){if(1&n&&(e.TgZ(0,"ion-item")(1,"ion-label"),e._uU(2),e.qZA()()),2&n){const i=e.oxw(2);e.xp6(2),e.hij("Jugadores en Rojo: ",i.totalRojos," ")}}function h(n,l){if(1&n){const i=e.EpF();e.TgZ(0,"ion-item")(1,"base-button-guardar",3),e.NdJ("click",function(){e.CHM(i);const a=e.oxw(2);return e.KtG(a.cerrarApuesta())}),e.qZA()()}if(2&n){const i=e.oxw(2);e.xp6(1),e.Q6J("label","Cerrar Apuesta")("valid",!0)("isSaving",i.isClosing)}}function v(n,l){if(1&n&&(e.TgZ(0,"ion-item")(1,"ion-label"),e._uU(2),e.ALo(3,"number"),e.qZA()()),2&n){const i=e.oxw(2);e.xp6(2),e.hij("Jugado: ",e.lcZ(3,1,null==i.apuesta?null:i.apuesta.apostado)," ")}}function y(n,l){if(1&n){const i=e.EpF();e.TgZ(0,"ion-item")(1,"ion-input",4),e.NdJ("ngModelChange",function(a){e.CHM(i);const s=e.oxw(2);return e.KtG(s.ganado=a)}),e.qZA()()}if(2&n){const i=e.oxw(2);e.xp6(1),e.Q6J("ngModel",i.ganado)}}function b(n,l){if(1&n){const i=e.EpF();e.TgZ(0,"ion-item")(1,"base-button-guardar",5),e.NdJ("click",function(){e.CHM(i);const a=e.oxw(2);return e.KtG(a.finalizarApuesta())}),e.qZA()()}if(2&n){const i=e.oxw(2);e.xp6(1),e.Q6J("valid",i.ganado)("label","Finalizar Apuesta")("valid",!0)("isSaving",i.isClosing)}}function x(n,l){if(1&n){const i=e.EpF();e.TgZ(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e._uU(3),e.ALo(4,"date"),e.qZA()(),e.TgZ(5,"ion-card-content")(6,"ion-list")(7,"ion-item")(8,"ion-label"),e._uU(9),e.qZA()(),e.YNc(10,A,3,1,"ion-item",1),e.YNc(11,h,2,3,"ion-item",1),e.YNc(12,v,4,3,"ion-item",1),e.YNc(13,y,2,1,"ion-item",1),e.YNc(14,b,2,4,"ion-item",1),e.qZA()(),e._UZ(15,"br")(16,"br"),e.TgZ(17,"base-button-cancelar",2),e.NdJ("click",function(){e.CHM(i);const a=e.oxw();return e.KtG(a.cancel())}),e.qZA()()}if(2&n){const i=e.oxw();e.xp6(3),e.hij("Apuesta : ",e.xi3(4,7,null==i.apuesta?null:i.apuesta.fecha,"dd/MM/yyyy"),""),e.xp6(6),e.hij("Estado : ",null==i.apuesta?null:i.apuesta.estado," "),e.xp6(1),e.Q6J("ngIf",1==i.estadoid),e.xp6(1),e.Q6J("ngIf",1==i.estadoid),e.xp6(1),e.Q6J("ngIf",2==i.estadoid),e.xp6(1),e.Q6J("ngIf",2==i.estadoid),e.xp6(1),e.Q6J("ngIf",2==i.estadoid)}}var g=function(n){return n[n.abierta=1]="abierta",n[n.cerrada=2]="cerrada",n[n.finalizada=3]="finalizada",n}(g||{});let Z=(()=>{var n;class l{set SetApuesta(t){if(t&&(this.apuesta=t,this.estadoid=this.apuesta.estadoid,this.apuesta.estadoid==g.abierta)){const a=new o.classHttp("get","User",null,"InRed");this.myHttpService.ejecuteURL(a).then(s=>{this.totalRojos=s.total})}}constructor(t,a){this.myHttpService=t,this.utilService=a,this.estadoid=null,this.saveEvent=new e.vpe,this.cancelEvent=new e.vpe,this.isClosing=!1}ngOnInit(){}finalizarApuesta(){var t=this;return(0,p.Z)(function*(){t.isClosing=!0;try{const a=new o.classHttp("put","Apuesta",null,"finalizar",{apostado:t.apuesta.apostado,ganado:t.ganado},t.apuesta.id),s=yield t.myHttpService.ejecuteURL(a);t.isClosing=!1,s&&(t.apuesta=null,t.saveEvent.emit(!0))}catch{t.isClosing=!1}})()}cerrarApuesta(){var t=this;return(0,p.Z)(function*(){t.isClosing=!0;try{const a=new o.classHttp("put","Apuesta",null,"cerrar",null,t.apuesta.id),s=yield t.myHttpService.ejecuteURL(a);t.isClosing=!1,s&&(t.apuesta=null,t.saveEvent.emit(!0))}catch{t.isClosing=!1}})()}cancel(){this.apuesta=null,this.cancelEvent.emit(!0)}}return(n=l).\u0275fac=function(t){return new(t||n)(e.Y36(o.MyHttpService),e.Y36(o.UtilService))},n.\u0275cmp=e.Xpm({type:n,selectors:[["gestion-apuesta"]],inputs:{SetApuesta:"SetApuesta"},outputs:{saveEvent:"saveEvent",cancelEvent:"cancelEvent"},decls:2,vars:1,consts:[[3,"isOpen","willDismiss"],[4,"ngIf"],[3,"click"],[3,"label","valid","isSaving","click"],["type","number","placeholder","ganado",3,"ngModel","ngModelChange"],[3,"valid","label","isSaving","click"]],template:function(t,a){1&t&&(e.TgZ(0,"ion-modal",0),e.NdJ("willDismiss",function(){return a.cancel()}),e.YNc(1,x,18,10,"ng-template"),e.qZA()),2&t&&e.Q6J("isOpen",null!=a.apuesta)},dependencies:[u.O5,d.JJ,d.On,c.PM,c.FN,c.Zi,c.Dq,c.pK,c.Ie,c.Q$,c.q_,c.ki,c.as,o.ButtonGuardarComponent,o.ButtonCancelarComponent,u.JJ,u.uU],styles:["ion-checkbox[_ngcontent-%COMP%]{--size: 32px;--checkbox-background-checked: #6815ec}ion-checkbox[_ngcontent-%COMP%]::part(container){border-radius:6px;border:2px solid #6815ec}"]}),l})();function C(n,l){if(1&n&&e._UZ(0,"img",6),2&n){const i=e.oxw();e.Q6J("src",i.webcamImage.imageAsDataUrl,e.LSH)}}const T=[{path:"",component:(()=>{var n;class l extends o.BasePage{onLoadDataEmiter(t){}constructor(t,a,s){super(t,s),this.myHttpService=t,this.utilService=a,this.seguridadService=s,this.a="",this.selectedApuesta=null,this.columns=[],this.entityName="Apuesta"}handleImage(t){this.webcamImage=t}ngOnInit(){var t=this;return(0,p.Z)(function*(){console.log("entra"),t.Init(),t.columns=[{name:"F",prop:"fecha",type:"date",OrderInit:"DESC"},{name:"A",prop:"apostado",type:"number"},{name:"G",prop:"ganado",type:"number"},{name:"B",prop:"boletoid",type:"file",fileid:"boletoid fileid",filename:"boletoid filename"},{name:"Estado",prop:"estado",type:"action",action:"actionApuesta",canAction:t.user.isAdmin,filterInit:t.user.isAdmin?"":` uxa.userid = ${t.user.id}`}]})()}actionEmiter(t){var a=this;return(0,p.Z)(function*(){"actionApuesta"===(null==t?void 0:t.action)&&(a.selectedApuesta=t.row,console.log(t.row.boleto))})()}updatependientesAll(){var t=this;return(0,p.Z)(function*(){try{const a=new o.classHttp("put",t.entityName,null,"updatependientesAll",{});(yield t.myHttpService.ejecuteURL(a))&&(t.utilService.message(o.typeMessage.success,"Guardado correctamente"),t.getTableRefresh())}catch{}})()}}return(n=l).\u0275fac=function(t){return new(t||n)(e.Y36(o.MyHttpService),e.Y36(o.UtilService),e.Y36(o.SeguridadService))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-apuesta"]],features:[e.qOj],decls:15,vars:11,consts:[[1,"router-outlet"],[3,"pictureTaken"],[3,"set_fileid"],[3,"src",4,"ngIf"],[3,"loadOnInit","canAddEntity","canUpdateEntity","title","entityName","columns","refresh","actionEmiter","onLoadDataEmiter"],[3,"SetApuesta","saveEvent","cancelEvent"],[3,"src"]],template:function(t,a){1&t&&(e.TgZ(0,"ion-grid",0)(1,"ion-row")(2,"ion-col")(3,"my-camera",1),e.NdJ("pictureTaken",function(m){return a.handleImage(m)}),e.qZA()()(),e.TgZ(4,"ion-row")(5,"ion-col"),e._UZ(6,"my-img",2),e.qZA(),e.TgZ(7,"ion-col"),e.YNc(8,C,1,1,"img",3),e.qZA(),e.TgZ(9,"ion-col"),e._UZ(10,"my-img",2),e.qZA()(),e.TgZ(11,"ion-row")(12,"ion-col")(13,"my-table",4),e.NdJ("actionEmiter",function(m){return a.actionEmiter(m)})("onLoadDataEmiter",function(m){return a.onLoadDataEmiter(m)}),e.qZA()()()(),e.TgZ(14,"gestion-apuesta",5),e.NdJ("saveEvent",function(){return a.getTableRefresh()})("cancelEvent",function(){return a.selectedApuesta=null}),e.qZA()),2&t&&(e.xp6(6),e.Q6J("set_fileid",11),e.xp6(2),e.Q6J("ngIf",a.webcamImage),e.xp6(2),e.Q6J("set_fileid",13),e.xp6(3),e.Q6J("loadOnInit",!0)("canAddEntity",a.user.isAdmin)("canUpdateEntity",a.user.isAdmin)("title","Apuestas")("entityName",a.entityName)("columns",a.columns)("refresh",a.tableRefresh),e.xp6(1),e.Q6J("SetApuesta",a.selectedApuesta))},dependencies:[u.O5,c.wI,c.jY,c.Nd,o.MyTableComponent,o.MyCameraComponent,o.MyImgComponent,Z]}),l})()}];let E=(()=>{var n;class l{}return(n=l).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.ez,d.u5,d.UX,c.Pc,f.Bz.forChild(T),o.SharedComponentsModule]}),l})()}}]);
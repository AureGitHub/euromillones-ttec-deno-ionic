"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1334],{1334:(y,m,r)=>{r.r(m),r.d(m,{AdministracionPageModule:()=>x});var u=r(6814),p=r(95),s=r(2511),d=r(4258),h=r(3044),f=r(5861),t=r(6689);function Z(e,l){if(1&e&&(t.TgZ(0,"ion-row",11)(1,"ion-col"),t._uU(2," Correo en rojo"),t.qZA(),t.TgZ(3,"ion-col")(4,"a",12),t._uU(5,"Correo"),t.qZA()()()),2&e){const n=t.oxw(2);t.xp6(4),t.cQ8("href","mailto:",n.lstAllEmailsInRed,"?body=",n.BodyMorosos,"&subject=",n.SubjectMorosos,"",t.LSH)}}function U(e,l){if(1&e){const n=t.EpF();t.TgZ(0,"ion-card-content")(1,"ion-card")(2,"ion-card-header")(3,"ion-card-title"),t._uU(4,"Total jugadores"),t.qZA()(),t.TgZ(5,"ion-card-content")(6,"ion-col",5),t.NdJ("click",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.downloadUsers())}),t._UZ(7,"ion-icon",6),t._uU(8),t.qZA()()(),t.TgZ(9,"ion-card")(10,"ion-card-header")(11,"ion-card-title"),t._uU(12,"Saldo"),t.qZA()(),t.TgZ(13,"ion-card-content")(14,"ion-row")(15,"ion-col"),t._uU(16,"Total"),t.qZA(),t.TgZ(17,"ion-col",7)(18,"span",8),t._uU(19),t.ALo(20,"number"),t.qZA()()(),t.TgZ(21,"ion-row",9)(22,"ion-col"),t._uU(23,"Bizum Confirmados"),t.qZA(),t.TgZ(24,"ion-col",7)(25,"span",8),t._uU(26),t.qZA()()(),t.TgZ(27,"ion-row",9)(28,"ion-col"),t._uU(29,"En Caja"),t.qZA(),t.TgZ(30,"ion-col",7)(31,"span",8),t._uU(32),t.ALo(33,"number"),t.qZA()()()()(),t.TgZ(34,"ion-card")(35,"ion-card-header")(36,"ion-card-title"),t._uU(37,"Correos"),t.qZA()(),t.TgZ(38,"ion-card-content"),t.YNc(39,Z,6,3,"ion-row",10),t.qZA()()()}if(2&e){const n=t.oxw();t.xp6(8),t.hij(" ",n.totalUsers," "),t.xp6(11),t.hij("",t.Dn7(20,5,n.totalSaldos,"1.2-2","es")," \u20ac"),t.xp6(7),t.hij("",null==n.objData||null==n.objData.data?null:n.objData.data.totalBizumConfirmados," \u20ac"),t.xp6(6),t.hij("",t.Dn7(33,9,n.totalSaldos-(null==n.objData||null==n.objData.data?null:n.objData.data.totalBizumConfirmados),"1.2-2","es")," \u20ac"),t.xp6(7),t.Q6J("ngIf",n.anyUserInRed)}}const A=function(e){return{color:e}};function b(e,l){if(1&e&&(t.TgZ(0,"tr")(1,"td",13),t._uU(2),t.qZA(),t.TgZ(3,"td",13),t._uU(4),t.qZA()()),2&e){const n=l.$implicit;t.xp6(1),t.Q6J("ngStyle",t.VKq(4,A,(null==n?null:n.saldo)<1?"red":(null==n?null:n.saldo)<2?"orange":null)),t.xp6(1),t.Oqu(null==n?null:n.name),t.xp6(1),t.Q6J("ngStyle",t.VKq(6,A,(null==n?null:n.saldo)<1?"red":(null==n?null:n.saldo)<2?"orange":null)),t.xp6(1),t.Oqu(null==n?null:n.saldo)}}const j=[{path:"",component:(()=>{var e;class l extends d.BasePage{constructor(o,a,c,i){super(o,i),this.myHttpService=o,this.utilService=a,this.alertController=c,this.seguridadService=i,this.BodyMorosos="Hola. Tu saldo es inferior a 1 euro. Si no lo incrementas, no jugar\xe1s la pr\xf3xima apuesta",this.SubjectMorosos="Euromillones. Saldo inferior a 1 Euro",this.subjectUltimaApuesta="",this.BodyUltimaApuesta="",this.lstAllEmailsInRed="",this.users=[]}ngOnInit(){var o=this;return(0,f.Z)(function*(){o.isLoading=!0,o.Init(),o.users=yield o.getUsers(),o.users=o.users.filter(i=>i.id>0),o.users=o.users.sort((i,g)=>i.saldo-g.saldo),o.totalUsers=o.users.length;const a=o.users.map(i=>parseFloat(i.saldo));o.totalSaldos=a.reduce((i,g)=>i+g);const c=new d.classHttp("get","Administracion",null,null,null,null);o.objData=yield o.myHttpService.ejecuteURL(c),o.isLoading=!1,o.getEmailInRed(),o.getsubjectUltimaApuesta()})()}downloadUsers(){const o=document.getElementById("htmlData"),a=new Blob([o.innerHTML],{type:"text/csv"}),c=document.createElement("a");c.href=URL.createObjectURL(a),c.download=`Saldo_${(new Date).toLocaleDateString()}.html`,c.click()}getEmailInRed(){const o=this.users.filter(a=>a.saldo<1);this.anyUserInRed=o.length>0,o.length>0&&(this.lstAllEmailsInRed=o.map(a=>a.email).join(","))}getMes(o){switch(parseInt(o)){case 1:return"Enero";case 2:return"Febrero";case 3:return"Marzo";case 4:return"Abril";case 5:return"Mayo";case 6:return"Junio";case 7:return"Julio";case 8:return"Agosto";case 9:return"Septiembre";case 10:return"Octubre";case 11:return"Noviembre";case 12:return"Diciembre"}return""}getsubjectUltimaApuesta(){var o=new Date,c=4-(0==o.getDay()?7:o.getDay());o.setDate(o.getDate()+c+1);const i=o.toLocaleDateString().split("/")[0],g=this.getMes(o.toLocaleDateString().split("/")[1]),S=o.toLocaleDateString().split("/")[2];this.subjectUltimaApuesta=`Euromillones. VIERNES,${i} de ${g} de ${S} `}}return(e=l).\u0275fac=function(o){return new(o||e)(t.Y36(d.MyHttpService),t.Y36(d.UtilService),t.Y36(s.Br),t.Y36(d.SeguridadService))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-administracion"]],features:[t.qOj],decls:12,vars:2,consts:[[4,"ngIf"],["id","htmlData",2,"display","none"],[2,"border","1px solid"],[1,"title",2,"border-bottom","1px solid"],[4,"ngFor","ngForOf"],[1,"hand","cajitaNumero",2,"color","rgb(2, 44, 2)","font-size","20px",3,"click"],["name","download-outline"],[1,"ion-text-end"],[1,"cajitaNumero"],[2,"color","navy"],["style","color: red",4,"ngIf"],[2,"color","red"],["target","_blank",3,"href"],[2,"border-bottom","1px solid","padding-right","2px",3,"ngStyle"]],template:function(o,a){1&o&&(t.TgZ(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),t._uU(3,"Administraci\xf3n"),t.qZA()(),t.YNc(4,U,40,13,"ion-card-content",0),t.qZA(),t.TgZ(5,"div",1)(6,"table",2)(7,"th",3),t._uU(8,"Nombre"),t.qZA(),t.TgZ(9,"th",3),t._uU(10,"Saldo"),t.qZA(),t.YNc(11,b,5,8,"tr",4),t.qZA()()),2&o&&(t.xp6(4),t.Q6J("ngIf",!a.isLoading),t.xp6(7),t.Q6J("ngForOf",a.users))},dependencies:[u.sg,u.O5,u.PC,s.PM,s.FN,s.Zi,s.Dq,s.wI,s.gu,s.Nd,u.JJ],styles:[".title[_ngcontent-%COMP%]{font-size:20px}.cajitaNumero[_ngcontent-%COMP%]{padding:4px;border:2px solid;border-radius:5px}"]}),l})()}];let x=(()=>{var e;class l{}return(e=l).\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[u.ez,p.u5,p.UX,s.Pc,h.Bz.forChild(j),d.SharedComponentsModule]}),l})()}}]);